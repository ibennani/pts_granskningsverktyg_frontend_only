<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self'; font-src 'self'; object-src 'none'; base-uri 'self'; form-action 'self';">
    <title>Verktyg för Digital Tillsyn</title> <!-- Kommer att uppdateras av main.js -->
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/features/markdown_toolbar.css">

    <!-- Build info (generated during build) -->
    <script src="build-info.js"></script>
    
    <!-- Override navigator.language for development (Cursor's internal browser) -->
    <script>
        // I utvecklingsläge, sätt navigator.language till sv-SE så att Cursor's interna webbläsare
        // kommunicerar svensk locale till applikationen
        (function() {
            // Detektera utvecklingsläge (localhost eller 127.0.0.1)
            const isDev = window.location.hostname === 'localhost' || 
                         window.location.hostname === '127.0.0.1' ||
                         window.location.port === '5173' ||
                         window.location.port === '4173';
            
            if (isDev) {
                try {
                    // Override navigator.language för att kommunicera svenska
                    Object.defineProperty(navigator, 'language', {
                        get: function() { return 'sv-SE'; },
                        configurable: true
                    });
                    // Override navigator.languages också
                    Object.defineProperty(navigator, 'languages', {
                        get: function() { return ['sv-SE', 'sv', 'en-GB', 'en']; },
                        configurable: true
                    });
                } catch (e) {
                    console.warn('Could not override navigator.language:', e);
                }
            }
        })();
    </script>
    
    <!-- Main application logic (ES6 module) -->
    <script type="module" src="js/main.js"></script>

</head>
<body>
    <div id="app-wrapper">
        <div id="global-action-bar-top"></div>

        <div id="app-container">
            <!-- Views will be rendered here -->
        </div>

        <div id="global-action-bar-bottom"></div>
        
        <!-- Build timestamp -->
        <div id="build-timestamp"></div>
    </div>
</body>
</html>
