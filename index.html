<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self'; font-src 'self' data:; object-src 'none'; base-uri 'self'; form-action 'self';">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%236E3282'/%3E%3Ctext x='50' y='68' font-family='Arial,sans-serif' font-size='48' font-weight='bold' fill='white' text-anchor='middle'%3EPTS%3C/text%3E%3C/svg%3E">
    <title>Verktyg för Digital Tillsyn</title> <!-- Kommer att uppdateras av main.js -->
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/features/markdown_toolbar.css">

    <!-- Build info (generated during build) -->
    <script src="build-info.js"></script>
    
    <!-- Override navigator.language for development (Cursor's internal browser) -->
    <script>
        // I utvecklingsläge, sätt navigator.language till sv-SE så att Cursor's interna webbläsare
        // kommunicerar svensk locale till applikationen
        (function() {
            // Detektera utvecklingsläge (localhost eller 127.0.0.1)
            const isDev = window.location.hostname === 'localhost' || 
                         window.location.hostname === '127.0.0.1' ||
                         window.location.port === '5173' ||
                         window.location.port === '4173';
            
            if (isDev) {
                try {
                    // Override navigator.language för att kommunicera svenska
                    Object.defineProperty(navigator, 'language', {
                        get: function() { return 'sv-SE'; },
                        configurable: true
                    });
                    // Override navigator.languages också
                    Object.defineProperty(navigator, 'languages', {
                        get: function() { return ['sv-SE', 'sv', 'en-GB', 'en']; },
                        configurable: true
                    });
                } catch (e) {
                    console.warn('Could not override navigator.language:', e);
                }
            }
        })();
    </script>
    
    <!-- Main application logic (ES6 module) -->
    <script type="module" src="js/main.js"></script>

</head>
<body>
    <a href="#main-content-heading" class="skip-link" id="skip-to-content" aria-hidden="false"></a>
    <div id="app-wrapper" aria-hidden="false">
        <nav id="global-action-bar-top" aria-label=""></nav>

        <div id="app-container">
            <!-- Views will be rendered here -->
        </div>

        <nav id="global-action-bar-bottom" aria-label=""></nav>
        
        <!-- Build timestamp -->
        <div id="build-timestamp"></div>
    </div>
    <div id="modal-root" aria-hidden="true"></div>
</body>
</html>
